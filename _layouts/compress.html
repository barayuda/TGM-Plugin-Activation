{% capture _LINE_FEED %}
{% endcapture %}{% capture _TAB %}	{% endcapture %}{% capture _content %}{{ content }}{% endcapture %}{% assign _pre_befores = _content | split: "<pre" %}{% assign _content = "" %}{% for _pre_before in _pre_befores %}{% assign _pres = _pre_before | split: "</pre>" %}{% assign _pres_after = "" %}{% assign _pre_content = "" %}{% if _pres.size == 2 %}{% if site.compress_html.codelinespans and _pres.first contains ' data-lang=' %}{% assign _lines = _pres.first | split: _LINE_FEED %}{% capture _pre_content %}{% for _line in _lines %}{% if forloop.first %}{{ _line | replace: 'data-lang="php">', 'data-lang="php"><span class="lineno"></span>' }}{{ _LINE_FEED }}{% elsif forloop.last %}{% assign _trimmed = _line | split: _TAB | join: "" | split: " " | join: "" %}{% if _trimmed != empty and trimmed != '</code>' %}<span class="lineno"></span>{% endif %}{{ _line }}{{ _LINE_FEED }}{% else %}<span class="lineno"></span>{{ _line }}{{ _LINE_FEED }}{% endif %}{% endfor %}{% endcapture %}{% endif %}{% endif %}{% if _pres.size != 0 %}{% if site.compress_html.blanklines %}{% assign _lines = _pres.last | split: _LINE_FEED %}{% capture _pres_after %}{% for _line in _lines %}{% assign _trimmed = _line | split: " " | join: " " %}{% if _trimmed != empty or forloop.last %}{% unless forloop.first %}{{ _LINE_FEED }}{% endunless %}{{ _line }}{% endif %}{% endfor %}{% endcapture %}{% else %}{% assign _pres_after = _pres.last | split: " " | join: " " %}{% endif %}{% endif %}{% capture _content %}{{ _content }}{% if _pre_before contains "</pre>" %}<pre{{ _pre_content }}</pre>{% endif %}{% unless _pre_before contains "</pre>" and _pres.size == 1 %}{{ _pres_after }}{% endunless %}{% endcapture %}{% endfor %}{{ _content }}